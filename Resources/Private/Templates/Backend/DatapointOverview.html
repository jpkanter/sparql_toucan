<html xmlns:f="https://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
{namespace core = TYPO3\CMS\Core\ViewHelpers}
<f:layout name="Backend" />

<f:section name="content">

    <f:render partial="Backend\MenuBar"  arguments="{activeTab : 'datapoint'}"/>

    <h1>All the Datapoints!</h1>

    <f:flashMessages />

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>UID</th>
            <th>Name</th>
            <th>Source</th>
            <th>Subject</th>
            <th>Predicate</th>
            <th>Value</th>
            <th colspan="1"><f:translate key="tx_sparql_toucan_general.action"/></th>
        </tr>
        </thead>
        <f:widget.paginate objects="{datapoints}" as="paginateLabel" configuration="{itemsPerPage: 30, insertAbove: 0, insertBelow: 1, maximumNumberOfLinks: 10}">
            <tbody>
            <f:for each="{paginateLabel}" as="datapoint" key="for_key">
                <tr>
                    <td>{datapoint.uid}</td>
                    <td>{datapoint.name}</td>
                    <td>{datapoint.sourceId.name}</td>
                    <td><f:link.action action="explore" arguments="{postcontent: {sourceId: datapoint.sourceId, subject: datapoint.subject}}">{datapoint.subject}</f:link.action></td>
                    <td>{datapoint.predicate}</td>
                    <td>
                        <f:for each="{supplement}" as="info" key="more_key">
                            <f:if condition="{more_key} == {for_key}">
                                <f:for each="{info}" as="sub_points">
                                    <strong>{sub_points.content}</strong>
                                    <span class="tx_toucan_language_block">{sub_points.language}</span>
                                    <br>
                                </f:for>
                            </f:if>
                        </f:for>
                    </td>
                    <td class="col-control">
                        <div class="btn-group" role="group">
                            <f:link.action action="editDatapoint" class="btn btn-default" arguments="{datapoint : datapoint}"><core:icon identifier="actions-document-open"/></f:link.action>
                            <f:link.action action="deleteDatapoint" class="btn btn-default" arguments="{datapoint : datapoint}"><core:icon identifier="actions-edit-delete" /></f:link.action>
                            <f:link.action action="updateDatapoint" class="btn btn-default" arguments="{datapoint : datapoint}"><core:icon identifier="actions-system-refresh" /></f:link.action>
                        </div>
                    </td>
                </tr>
            </f:for>
            </tbody>
        </f:widget.paginate>
    </table>
    <f:link.action action="newDatapoint" class="btn btn-default">New Datapoint</f:link.action>
    <f:link.action action="remoteUpdateDatapoints" class="btn btn-warning">Update all Datapoints</f:link.action>
    <br>


    <f:debug>{_all}</f:debug>
</f:section>
</html>