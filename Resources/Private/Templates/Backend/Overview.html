<html xmlns:f="https://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Backend" />

<f:section name="content">
    <h1><f:translate key="tx_sparqltoucan_bck_overview_title" /></h1>

    <f:flashMessages />

    <table  class="tx_sparqltoucan" >
        <tr>
            <th><f:translate key="tx_sparqltoucan_domain_model_collection.name" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collection.layout" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collection.style_override" /></th>
            <th span="2">Actions </th>
        </tr>

        <f:for each="{collections}" as="collection">
            <tr>
                <td><f:link.action action="show" arguments="{collection : collection}"> {collection.name}</f:link.action></td>
                <td><f:link.action action="show" arguments="{collection : collection}"> {collection.layout}</f:link.action></td>
                <td><f:link.action action="show" arguments="{collection : collection}"> {collection.styleOverride}</f:link.action></td>
                <td><f:link.action action="editCollection" arguments="{collection : collection}">Edit</f:link.action></td>
                <td><f:link.action action="deleteCollection" arguments="{collection : collection}">Delete</f:link.action></td>
            </tr>
        </f:for>
    </table>

    <f:link.action action="newCollection">New Collection</f:link.action>

    <h2>Datapoints</h2>
    <table class="tx_sparqltoucan">
        <tr>
            <th>UID</th>
            <th>PID</th>
            <th>Source</th>
            <th>Subject</th>
            <th>Predicate</th>
            <th>Value</th>
        </tr>
        <f:for each="{datapoints}" as="datapoint">
            <tr>
                <td>{datapoint.uid}</td>
                <td>{datapoint.pid}</td>
                <td>{datapoint.sourceId.name}</td>
                <td>{datapoint.subject}</td>
                <td>{datapoint.predicate}</td>
                <td><strong><f:format.crop maxCharacters="200" append="&nbsp;[...]">{datapoint.cachedValue -> f:format.nl2br()}</f:format.crop></strong></td>
            </tr>
        </f:for>
    </table>
    <f:link.action action="newDatapoint">New Datapoint</f:link.action>
    <sub><f:link.action action="remoteUpdateDatapoints">Update Datapoints</f:link.action></sub>
    <br>
    <f:link.action action="explore" class="tx_sparqltoucan_fatlink">Explore Sparql Endpoint</f:link.action>

    <h2>Sources</h2>
    <table  class="tx_sparqltoucan" >
        <tr>
            <th>UID</th>
            <th>Name</th>
            <th>URL</th>
            <th span="2">i18n:Actions</th>
        </tr>
        <f:for each="{sources}" as="source">
            <tr>
                <td>{source.uid}</td>
                <td>{source.name}</td>
                <td>{source.url}</td>
                <td><f:link.action action="editSource" arguments="{source:source}">i18n:Edit Source</f:link.action></td>
                <td><f:link.action action="deleteSource" arguments="{source:source}" class="tx_sparqltoucan_srslink">i18n:Delete Source</f:link.action></td>
            </tr>
        </f:for>
    </table>
    <f:link.action action="newSource">New Source</f:link.action>


    <f:be.buttons.csh />

    <p><em>Only real with capitalised nouns in english</em></p>
    <f:link.action action="testSomething" class="tx_sparqltoucan_fatlink">Do they Debug Case of the Day.</f:link.action>
</f:section>
</html>