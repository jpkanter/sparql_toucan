<html xmlns:f="https://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="content">
    <h1>Edit Collection</h1>

    <f:flashMessages />

    <f:render partial="FormErrors" />

    <f:form action="updateCollection" name="collection" object="{collection}" >
        <f:render partial="Collection/FormFields" arguments="{collection:collection}" />
        <f:form.submit value="Save" />
    </f:form>

    <h2>Assigned Entries</h2>
    <table>
        <tr>
            <th>UID</th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.position" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.name" /></th>
            <th>Datapoint</th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.style" /></th>
            <th colspan="2">Actions</th>
        </tr>
        <f:for each="{collectionEntry}" as="collectionEntry">
            <tr style="border: 1px solid grey">
                <td>{collectionEntry.uid}</td>
                <td>{collectionEntry.position}</td>
                <td>{collectionEntry.name} - <em>{collectionEntry.datapointId.name}</em></td>
                <td>{collectionEntry.style}</td>
                <td><f:link.action action="editCollectionEntry" arguments="{collectionEntry : collectionEntry}">Edit</f:link.action></td>
                <td><f:link.action action="deleteCollectionEntry" arguments="{collectionEntry : collectionEntry}">Remove</f:link.action></td>
            </tr>
        </f:for>
        <tr>
            <th colspan="6" style="font-size: 16px; font-weight: bolder;">New Entry</th>
        </tr>
        <tr>
            <f:form action="createCollectionEntry" name="newCollectionEntry" object="{newCollectionEntry}" >
                <td><f:form.hidden property="collectionID" value="{collection.uid}"/> </td>
                <td><f:form.textfield property="position" /></td>
                <td><f:form.textfield property="name" /></td>
                <td><f:form.select property="datapointId" options="{datapoints}" optionValueField="uid" optionLabelField="name"/></td>
                <td><f:form.textfield property="style" /></td>
                <td><f:form.submit value="Create" /></td>
            </f:form>
        </tr>
    </table>

</f:section>
</html>