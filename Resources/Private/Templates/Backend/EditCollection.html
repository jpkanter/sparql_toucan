<html xmlns:f="https://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Backend" />

<f:section name="content">

    <f:render partial="Backend/MenuBar" />

    <h1><f:translate key="tx_sparql_toucan_h1.editcollection" /></h1>

    <f:flashMessages />

    <f:render partial="FormErrors" />

    <div style="display: grid; grid-template-columns: 20rem 20rem;margin-right: auto;">
        <div style="display: flex;">
            <f:form action="updateCollection" name="collection" object="{collection}" >
                <f:render partial="Collection/FormFields" arguments="{collection:collection}" />
                <f:form.submit value="Save" />
            </f:form>
        </div>
        <div style="display: flex;" >
            <f:link.action action="editCollectionDynamicLayout" arguments="{collection:collection}" class="tx_sparqltoucan_interactive_button">Interactive Layouting</f:link.action>
        </div>
    </div>




    <h2><f:translate key="tx_sparql_toucan_h2.assignedentries" /></h2>
    <table class="tx_sparqltoucan">
        <tr>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.gridrow" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.gridcolumn" /></th>
            <th></th>
            <th></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.name" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.datapoint_id" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.textpoint" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.style" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.style_name" /></th>
            <th colspan="2">Actions</th>
        </tr>
        <f:for each="{collectionEntry}" as="Entry">
            <tr style="border: 1px solid grey">
                <td colspan="4" style="font-family: 'Iosevka Extended';">{Entry.gridRow} / {Entry.gridColumn} / {Entry.gridRowEnd} / {Entry.gridColumnEnd} {Entry.Uid}</td>
                <td>{Entry.name} - <em>{Entry.datapointId.name}</em></td>
                <td>
                    {Entry.datapointId.predicate}
                </td>
                <td>{Entry.textpoint.name}</td>
                <td>{Entry.style}</td>
                <td>{Entry.style_name}</td>
                <td><f:link.action action="showCollectionEntry" arguments="{collectionEntry : Entry}">Edit</f:link.action></td>
                <td><f:link.action action="deleteCollectionEntry" arguments="{collectionEntry : Entry}">Remove</f:link.action></td>
            </tr>
        </f:for>
        <tr>
            <th colspan="6" style="font-size: 16px; font-weight: bolder;">New Datapoint Entry</th>
        </tr>
        <tr>
            <f:form action="createCollectionEntry" name="newCollectionEntry" object="{newCollectionEntry}" >
                <f:form.hidden property="collectionID" value="{collection.uid}"/>
                <td><f:form.textfield property="gridRow" size="2"/></td>
                <td><f:form.textfield property="gridColumn" size="2"/></td>
                <td><f:form.textfield property="gridRowEnd" size="2"/></td>
                <td><f:form.textfield property="gridColumnEnd" size="2"/></td>
                <td><f:form.textfield property="name" size="50"/></td>
                <td><f:form.select property="datapointId" options="{datapoints}" optionValueField="uid" optionLabelField="name"/></td>
                <td></td>
                <td>
                    <f:render partial="Backend/CollectionEntryStyles" arguments="{style : 0}"/>
                </td>
                <td><f:form.textfield property="styleName" /></td>
                <td colspan="2"><f:form.submit value="Create" /></td>
            </f:form>
        </tr>
        <tr>
            <th colspan="6" style="font-size: 16px; font-weight: bolder;">New Textpoint Entry</th>
        </tr>
        <tr>
            <f:form action="createCollectionEntry" name="newCollectionEntry" object="{newCollectionEntry}" >
                <f:form.hidden property="collectionID" value="{collection.uid}"/>
                <td><f:form.textfield property="gridRow" size="2"/></td>
                <td><f:form.textfield property="gridColumn" size="2"/></td>
                <td><f:form.textfield property="gridRowEnd" size="2"/></td>
                <td><f:form.textfield property="gridColumnEnd" size="2"/></td>
                <td><f:form.textfield property="name" size="50"/></td>
                <td></td>
                <td><f:form.select property="textpoint" options="{textpoints}" optionValueField="uid" optionLabelField="name"/></td>
                <td>
                    <f:render partial="Backend/CollectionEntryStyles" arguments="{style : 0}"/>
                </td>
                <td><f:form.textfield property="styleName" /></td>
                <td colspan="2"><f:form.submit value="Create" /></td>
            </f:form>
        </tr>
    </table>
    <f:debug>{_all}</f:debug>

</f:section>
</html>