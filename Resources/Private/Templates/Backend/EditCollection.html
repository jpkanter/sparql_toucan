<html xmlns:f="https://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Backend" />

<f:section name="content">

    <f:render partial="Backend/MenuBar" />

    <h1><f:translate key="tx_sparql_toucan_h1.editcollection" /></h1>

    <f:flashMessages />

    <f:render partial="FormErrors" />

    <f:form action="updateCollection" name="collection" object="{collection}" >
        <f:render partial="Collection/FormFields" arguments="{collection:collection}" />
        <f:form.submit value="Save" />
    </f:form>

    <h2><f:translate key="tx_sparql_toucan_h2.assignedentries" /></h2>
    <table class="tx_sparqltoucan">
        <tr>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.position" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.name" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.datapoint_id" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.style" /></th>
            <th><f:translate key="tx_sparqltoucan_domain_model_collectionentry.style_name" /></th>
            <th colspan="2">Actions</th>
        </tr>
        <f:for each="{collectionEntry}" as="Entry">
            <tr style="border: 1px solid grey">
                <td>{Entry.position}</td>
                <td>{Entry.name} - <em>{Entry.datapointId.name}</em></td>
                <td>
                    {Entry.datapointId.predicate}
                </td>
                <td>{Entry.style}</td>
                <td>{Entry.style_name}</td>
                <td><f:link.action action="showCollectionEntry" arguments="{collectionEntry : Entry}">Edit</f:link.action></td>
                <td><f:link.action action="deleteCollectionEntry" arguments="{collectionEntry : Entry}">Remove</f:link.action></td>
            </tr>
        </f:for>
        <tr>
            <th colspan="6" style="font-size: 16px; font-weight: bolder;">New Entry</th>
        </tr>
        <tr>
            <f:form action="createCollectionEntry" name="newCollectionEntry" object="{newCollectionEntry}" >
                <f:form.hidden property="collectionID" value="{collection.uid}"/>
                <td><f:form.textfield property="position" size="4"/></td> <!--Fill with open Positions Function-->
                <td><f:form.textfield property="name" size="50"/></td>
                <td><f:form.select property="datapointId" options="{datapoints}" optionValueField="uid" optionLabelField="name"/></td>
                <td>
                    <f:render partial="Backend/CollectionEntryStyles" arguments="{style : 0}"/>
                </td>
                <td><f:form.textfield property="style_name" /></td>
                <td colspan="2"><f:form.submit value="Create" /></td>
            </f:form>
        </tr>
    </table>
    <f:debug>{_all}</f:debug>

</f:section>
</html>